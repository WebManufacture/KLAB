<!DOCTYPE html>
<html>
    <head>
	<script type="text/javascript" src="Utils.js"></script>
	<script type="text/javascript" src="DOM.js"></script>
	<script type="text/javascript" src="Url.js"></script>
	<script type="text/javascript" src="Ajax.js"></script>
	<script type="text/javascript" src="Jasp.js"></script>
	<link type='text/css' rel='stylesheet' href="System.default.css"/>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
	<title>Тест</title>
	<style type="text/css">
	    .square{
		  width: 100px;	
		  height: 100px;		  
		  border: 0px solid black;
                  padding-bottom: 30px;
		border: 4px solid transparent;
            }	
	    
	    .square[color='green'],.square.green{
  	      background-color: #539a00; /* Lgreen */
	    }
	    .square[color='blue'],.square.blue{		  
  	      background-color: #308dcf;  /*Lblue*/
	    }
	    .square[color='red'],.square.red{
    	      background-color: #d71616; /*Lred*/
	    }
	    .square[color='yellow'],.square.yellow{
    	      background-color: #FFFF00;
	    }
	    .square[color='magenta'],.square.magenta{
    	      background-color: #FF33CC; 
	    }
	    
	    .square.active{
		border: 4px solid #000;
	    }
	</style>
    </head>
    <body>
      <div class="squareParent">
	  <div class="red square" color='red'>
	  </div>
	  <div class="green square" color='green'>
	  </div>
	  <div class="blue square" color='blue'>
          </div>
	  <div class="yellow square" color='yellow'>
          </div>
	  <div class="magenta square" color='magenta'>
          </div>
      </div>
	<div id='div2'>
	    
	</div>
	<script>
	    var sqrParent; 
	    var squares = [];
            var tmp;
	    var clicked = [];
	    
	    function Init(){	
		sqrParent = DOM.get('.squareParent');
		
		squares = sqrParent.all(".square");
		
		for(var i=0; i < squares.length; i++){
		    squares[i].onclick = squareClick2;
		    squares[i].color = squares[i].get("@color");
		    squares[i].removeAttribute("color");
		}		
	    }
    
	    
	    function squareClick(event){		
		var active = DOM('.square.active');
		if (active){
		    active.del('.active');
		    if (active != this){
			var acolor = active.get("@color");
			var tcolor = this.get("@color");
			active.set("@color", tcolor);
			this.set("@color", acolor);
		    }
		}
		else
		{
		    this.add('.active');
		}
	    }
	    
	    function squareClick2(event){		 //2й способ!
		var active = DOM('.square.active');
		if (active){
		    active.del('.active');
		    if (active != this){
			var parent = DOM('.squareParent');
			var next = this.nextSibling;
			if (next != null){
			    parent.insertBefore(this, active);
			    parent.insertBefore(active, next);			    
			}
			else
			{
			    parent.insertBefore(active, this);
			    parent.add(active);
			}
		    }
		}
		else
		{
		    this.add('.active');
		}
	    }
	    
	    function squareClick3(event){		 //3й способ!
		var active = DOM('.square.active');
		if (active){
		    active.del('.active');
		    if (active != this){
			var acolor = active.color;
			var tcolor = this.color;
			active.del("." + active.color);
			this.del("." + this.color);
			active.add("." + tcolor);
			this.add("." + acolor);
			this.color = acolor;
			active.color = tcolor;
		    }
		}
		else
		{
		    this.add('.active');
		}
	    }
	    
	    
	    WS.DOMload(Init);
	</script>
    </body>	
</html> 