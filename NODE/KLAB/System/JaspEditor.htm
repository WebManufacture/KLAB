<include url="System.Components.js"></include>
<include url="System.Win.htm" alt="system.windows.htm"></include>
  
<div class="module-button" onclick="JaspEditor.show()" icon="applications-system.png" ></div>

<win class="JaspEditor" type="smallwindow" title="Редактор ЯСП">
    <div class="pre-code component" url="system.jseditor.htm" oncreated="JaspEditor.PreComInit(JaspEditor.Editor);"></div>
    <div class="jasp-code"></div>    
    <div class="button small" title="Сгенерировать" onclick="JaspEditor.Compile();" icon="applications-system.png"></div>
    <div class="button small" title="Выполнить" onclick="JaspEditor.Execute();" icon="exec.png"></div>
</win>


<script type="text/javascript">
    JaspEditor = W.get(".JaspEditor");
    
    JaspEditor.Editor = JaspEditor.get(".pre-code");
    
    JaspEditor.Code = JaspEditor.get(".jasp-code");
    
    JaspEditor.Compile = function()
	{
	    JaspEditor.Code.html(J.Compile(JaspEditor.Editor.value));
	};
    
    JaspEditor.Execute = function()
	{
	    window.eval(JaspEditor.Code.html());
	};
    
    JaspEditor.PreComInit = function(ed)
	{
	    ed.focus();
	};
    
</script>

<style type="text/css">
  .window.JaspEditor
  {
    color: black;
    top: 100px;
    right: 100px;
    width: 500px;
    height: 700px;
    z-index: 1000;
  }
   
  .JaspEditor .pre-code
  {
    background-color: #CCC;
    border: solid 1px darkorange;
    width: 96%;
    margin-left: 2%;
    margin-right: 2%;
    height: 326px;
    text-align: left;
  }  
    
  .JaspEditor .jasp-code
  {
    background-color: #CCC;
    border: solid 1px darkorange;
    width: 96%;
    margin-left: 2%;
    margin-right: 2%;
    text-align: left;
    padding-top: 4px;
  }
   
</style>